<div class="flex items-center justify-center min-h-screen">
  <div class="w-full max-w-md p-8 bg-gray-700 rounded-lg shadow-lg">
    <h2 class="mb-6 text-2xl font-bold text-center text-purple-400">
      ğŸ” Login to Grain
    </h2>

    <div id="login-result" class="mb-4"></div>

    <form
      hx-post="/login"
      hx-target="#login-result"
      hx-indicator=".spinner"
      class="space-y-4"
    >
      <div>
        <label
          for="publicKey"
          class="block mb-2 text-sm font-bold text-gray-300"
        >
          Public Key (hex):
        </label>
        <input
          type="text"
          id="publicKey"
          name="publicKey"
          placeholder="Enter your public key..."
          class="w-full px-3 py-2 text-white bg-gray-600 border border-gray-500 rounded focus:outline-none focus:border-purple-500"
          required
          _="
            on keyup
              if isValidHex(my.value) or my.value.length == 0
                remove .border-red-500 from me
                add .border-gray-500 to me
              else
                remove .border-gray-500 from me
                add .border-red-500 to me
              end
          "
        />
        <p class="mt-1 text-xs text-gray-400">
          64-character hexadecimal string
        </p>
      </div>

      <div class="flex items-center space-x-4">
        <button
          type="submit"
          class="flex-1 px-4 py-2 font-bold text-white transition-colors bg-purple-600 rounded hover:bg-purple-700 focus:outline-none focus:bg-purple-700"
          _="
            on htmx:beforeRequest
              call showLoginResult('loading', 'Authenticating...')
            end
            on htmx:responseError
              call handleLoginError(event.detail.xhr, 'Login failed. Please check your public key.')
            end
            on htmx:afterRequest
              if event.detail.xhr.status == 200
                call handleLoginSuccess(event.detail.xhr.responseText)
              else
                call handleLoginError(event.detail.xhr, 'Invalid public key or authentication failed.')
              end
            end
          "
        >
          Login
        </button>
        <div class="spinner"></div>
      </div>
    </form>

    <div class="mt-6 text-sm text-center text-gray-400">
      <p class="mb-2">
        ğŸ“ <span class="font-semibold">New to Nostr?</span> You'll need a Nostr
        client to generate your keys first.
      </p>
      <p>
        ğŸ”‘ <span class="font-semibold">Security:</span> Your private key never
        leaves your device. We only need your public key to fetch your profile.
      </p>
      <!-- Add any helpful links for getting started with Nostr here -->
    </div>

    <div class="mt-4 text-center">
      <button
        class="text-sm text-gray-400 underline hover:text-white"
        hx-get="/views/home.html"
        hx-target="#main-content"
        hx-push-url="/"
      >
        â† Back to Home
      </button>
    </div>
  </div>

  <!-- Load login-specific JavaScript -->
  <script src="/static/js/login.js"></script>
</div>
